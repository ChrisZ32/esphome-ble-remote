esp32:
  board: nodemcu-32s
  framework:
    type: esp-idf
    sdkconfig_options:
      CONFIG_BT_ENABLED: y

esphome:
  name: firetv-remote
  includes:
    - ble_hid_client.h
    - ble_hid_client.cpp

# Enable logging
logger:
  level: DEBUG

# Enable Home Assistant API
api:

ota:
  password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: !secret wifi_fallback_ssid
    password: !secret wifi_fallback_password

custom_component:
  - id: ble_hid
    lambda: |-
      auto bleComponent = new BleHidClientComponent();
      App.register_component(bleComponent);
      return {bleComponent};

text_sensor:
  - platform: custom
    lambda: |-
      return {ble_hid_keycode(ble_hid)};
    text_sensors:
      - name: remote_keycode

binary_sensor:
  - platform: custom
    lambda: |-
      return {ble_hid_keypress(ble_hid)};
    binary_sensors:
      - name: remote_keypress